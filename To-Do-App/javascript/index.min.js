$(window).on("load", function () { function t() { let e = $(this).find("input[type=checkbox]").is(":checked"), a = $(this).parent().data("id"), t = JSON.parse(localStorage.getItem("tasks")) || []; t = t.map(t => t.id === a ? { ...t, completed: e } : t), localStorage.setItem("tasks", JSON.stringify(t)), e ? $(this).find("span").css({ "text-decoration": "line-through" }) : $(this).find("span").css({ "text-decoration": "none" }) } function e() { let e = $(this).parent().data("id"), t = JSON.parse(localStorage.getItem("tasks")) || []; t = t.filter(t => t.id !== e), localStorage.setItem("tasks", JSON.stringify(t)), $(this).parent().remove() } let n = function () { var t; $(this).parent().find("label input[type=checkbox]").is(":checked") ? i("Cannot update a completed task") : ($(this).parent().find("label input[type=checkbox]").attr({ disabled: "true" }), t = $(this).parent().find("label span").text(), $(this).parent().find("label span").remove(), $(this).parent().find("label").append('<input type="text"/>'), $(this).parent().find("label input[type=text]").focus().val(t), $(this).parent().find("button.edit").text("Update").removeClass("edit").addClass("update"), $(this).parent().find("button.update").off("click").on("click", function () { if ($(this).parent().find("label input[type=text]").val()) { let e = $(this).parent().find("label input[type=text]").val(), a = $(this).parent().data("id"), t = JSON.parse(localStorage.getItem("tasks")) || []; t = t.map(t => t.id === a ? { ...t, task: e } : t), localStorage.setItem("tasks", JSON.stringify(t)), $(this).parent().find("label input[type=text]").remove(), $(this).parent().find("label").append(`<span>${e}</span>`), $(this).text("Edit").removeClass("update").addClass("edit").off("click").on("click", n), $(this).parent().find("label input[type=checkbox]").removeAttr("disabled") } else i("Update cannot be empty") })) }; function i(t) { var e = $("p.error"); e.show().text(t), setTimeout(() => e.hide(), 3e3) } function s() { $(".tasks").empty(), (JSON.parse(localStorage.getItem("tasks")) || []).forEach(t => { $(".tasks").prepend(`<div class="task" data-id="${t.id}"><label><input type="checkbox" ${t.completed ? "checked" : ""}><span style="text-decoration: ${t.completed ? "line-through" : "none"}">${t.task}</span></label><button class="delete">Delete</button><button class="edit">Edit</button></div>`) }), $("label").on("click", t), $("button.delete").on("click", e), $("button.edit").on("click", n) } console.log("jQuery active!!!"), s(), $("button.add-task-btn").on("click", function () { var t, e, a = $("input[type=text]"); a.val() ? (t = { id: Date.now(), task: a.val(), completed: !1 }, (e = JSON.parse(localStorage.getItem("tasks")) || []).push(t), localStorage.setItem("tasks", JSON.stringify(e)), a.val(""), s()) : i("Task cannot be empty") }) });
